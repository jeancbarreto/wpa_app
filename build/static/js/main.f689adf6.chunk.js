(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/bulb-curvy-flat.82c12f20.png"},194:function(e,t,a){e.exports=a(442)},254:function(e,t,a){},442:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(22),i=a.n(r),l=a(65),c=a.n(l),s=(a(254),a(24)),u=a(25),d=a(29),m=a(26),p=a(30),h=a(167),g=a.n(h),E=a(27),f=a(177),b=a.n(f),v=a(43),y=a.n(v),C=a(120),w=a.n(C),k=a(45),j=a.n(k),S=a(23),O=a(51),x=a.n(O),N=a(53),P=a(82),M=a.n(P),L=a(169),I=a.n(L),A=a(16),T=a.n(A),B=a(67),R=a.n(B),W=a(54),_=a.n(W),U=a(115),q=a.n(U),D=a(41),z=a(171),H=a.n(z),G=a(170),Q=a.n(G),V=a(172),J=a.n(V),K=a(118),$=a.n(K),F=a(66),X=a.n(F),Y=a(116),Z=a.n(Y),ee=a(117),te=a.n(ee),ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a.state={anchorEl:null,mobileMoreAnchorEl:null,name:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,a=e.mobileMoreAnchorEl,n=this.props.classes,r=Boolean(t),i=Boolean(a),l=this.props.user,c=this.props.title,s=this.props.type,u=o.a.createElement(q.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:this.handleMenuClose},o.a.createElement(_.a,{onClick:this.handleMenuClose},o.a.createElement(X.a,{"aria-label":"Recipe",className:n.avatar},o.a.createElement("img",{src:l.photoURL,alt:"",className:n.Photo}))),o.a.createElement(_.a,{onClick:this.handleMenuClose},"Mi Cuenta")),d=o.a.createElement(q.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleMenuClose},o.a.createElement(_.a,{onClick:this.handleMobileMenuClose},o.a.createElement(T.a,{color:"inherit"},o.a.createElement(R.a,{badgeContent:4,color:"secondary"},o.a.createElement(Z.a,null))),o.a.createElement("p",null,"Mensajes")),o.a.createElement(_.a,{onClick:this.handleMobileMenuClose},o.a.createElement(T.a,{color:"inherit"},o.a.createElement(R.a,{badgeContent:11,color:"secondary"},o.a.createElement(te.a,null))),o.a.createElement("p",null,"Notificaciones")),o.a.createElement(_.a,{onClick:this.handleProfileMenuOpen},o.a.createElement(T.a,{color:"inherit"},o.a.createElement($.a,null)),o.a.createElement("p",null,"Perfil")));return o.a.createElement("div",{className:n.root},o.a.createElement(M.a,{position:"fixed"},o.a.createElement(I.a,null,void 0!==s?o.a.createElement("a",{href:"javascript:window.history.back();"},o.a.createElement(T.a,null,o.a.createElement(Q.a,null))):o.a.createElement(T.a,{className:n.menuButton,color:"inherit","aria-label":"Open drawer"},o.a.createElement(H.a,null)),o.a.createElement("center",null,c),o.a.createElement("div",{className:n.grow}),o.a.createElement("div",{className:n.sectionDesktop},o.a.createElement(T.a,{color:"inherit"},o.a.createElement(R.a,{badgeContent:4,color:"secondary"},o.a.createElement(Z.a,null))),o.a.createElement(T.a,{color:"inherit"},o.a.createElement(R.a,{badgeContent:17,color:"secondary"},o.a.createElement(te.a,null))),o.a.createElement(T.a,{"aria-owns":r?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},o.a.createElement($.a,null))),o.a.createElement("div",{className:n.sectionMobile},o.a.createElement(T.a,{href:"/payment/"},o.a.createElement(J.a,null)," :"),o.a.createElement(T.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},o.a.createElement(X.a,{"aria-label":"Recipe",className:n.avatar},o.a.createElement("img",{src:l.photoURL,alt:"",className:n.Photo})))))),u,d)}}]),t}(o.a.Component),ne=Object(E.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(N.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(N.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(D.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(D.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(N.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(N.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(N.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),Photo:{width:"100%"}}})(ae),oe=a(173),re=a.n(oe),ie=a(119),le=a.n(ie),ce=a(175),se=a.n(ce),ue=a(174),de=a.n(ue),me=a(176),pe=a.n(me),he=a(34),ge=a.n(he),Ee=(a(80),{headers:{"Content-Type":"application/json",Accept:"application/json"}}),fe=new S.a,be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handlePillUpProducto=function(){ge.a.get("https://api-wpa.herokuapp.com/locales",Ee).then(function(e){200===e.status&&a.setState({data:e.data})}).catch(function(e){console.log(e)})},a.state={data:[{id:0,name:"",description:"",direction:"",image:"",created_at:"",update_at:""}]},a.handlePillUpProducto(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=fe.get("user"),t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement("div",null,void 0!==e?o.a.createElement(ne,{user:e,title:"Locales"}):null),o.a.createElement(re.a,{cellHeight:180,className:t.gridList},o.a.createElement(le.a,{key:"Subheader",cols:2,style:{height:"auto"}},o.a.createElement(de.a,{component:"div"},"Locales")),this.state.data.map(function(e){return o.a.createElement(le.a,{key:e.img,className:t.GridList_item},o.a.createElement("img",{src:e.image,alt:e.name}),o.a.createElement("a",{href:e.id?"/detail/"+e.id:"/detail"},o.a.createElement(se.a,{title:e.name,subtitle:o.a.createElement("span",null,"by: ",e.created_at),actionIcon:o.a.createElement(T.a,{className:t.icon},o.a.createElement(pe.a,null))})))})))}}]),t}(n.Component),ve=Object(E.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},gridList:{width:"100%",height:"100%"},icon:{color:"rgba(255, 255, 255, 0.54)"},GridList_item:{width:"100%",height:227,padding:2}}})(be),ye={headers:{"Content-Type":"application/json",Accept:"application/json"}},Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleValidateExisteCookie=function(){var e=new S.a;a.state.user===[]&&(a.setState({user:e.get("user")}),a.state.user!==[]&&a.setState({Login:!0}))},a.handleAuth=function(){var e=new c.a.auth.GoogleAuthProvider,t=new Date;t.setTime(t.getTime()+6e4),c.a.auth().signInWithPopup(e).then(function(e){return a.handleChangeUser(e)}).catch(function(e){return console.log(e.message)})},a.handleChangeUser=function(e){var t=new S.a;a.setState({user:e.user,Login:!0}),t.set("user",a.state.user,{path:"/"}),ge.a.post("https://api-wpa.herokuapp.com/users",{name:a.state.user.displayName,email:a.state.user.email},ye).then(function(e){if(200===e.status){var t=new S.a;console.log(e.data),t.set("iap",e.data.id,{path:"/"})}else console.log("Error...")}).catch(function(e){console.log(e)})},a.state={user:[],Login:!1},a.handleValidateExisteCookie(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return this.handleValidateExisteCookie(),o.a.createElement("div",{className:"App"},this.state.Login?o.a.createElement(ne,{user:this.state.user}):null,o.a.createElement("header",{className:"App-header"},o.a.createElement(j.a,{xs:12,className:"paperClass"},o.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"})),o.a.createElement(j.a,{xs:12},o.a.createElement(x.a,{in:this.state.Login},o.a.createElement("div",null,o.a.createElement("h5",null,"Hola ",this.state.user.displayName),o.a.createElement("p",null),o.a.createElement(y.a,{variant:"contained",color:"primary",className:e.button,href:"/home"},o.a.createElement(w.a,{className:e.extendedIcon}),"Locales")))),o.a.createElement(x.a,{in:!1===this.state.Login},o.a.createElement(b.a,{variant:"extended","aria-label":"Delete",onClick:this.handleAuth,className:!1===this.state.Login?e.ShowButtom:e.HideButton},o.a.createElement(w.a,{className:e.extendedIcon}),"Iniciar Sesi\xf3n con Google")),o.a.createElement("br",null),o.a.createElement("br",null)))}}]),t}(n.Component),we=Object(E.withStyles)(function(e){return{fab:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},HideButton:{display:"none"},ShowButtom:{display:"block"},paperClass:{paddingBottom:"14%"},button:{margin:e.spacing.unit}}})(Ce),ke=a(446),je=a(448),Se=a(447),Oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function xe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ne=a(185),Pe=a.n(Ne),Me=a(187),Le=a.n(Me),Ie=a(178),Ae=a.n(Ie),Te=a(179),Be=a.n(Te),Re=a(121),We=a.n(Re),_e=a(180),Ue=a.n(_e),qe=a(181),De=a.n(qe),ze=a(184),He=a.n(ze),Ge=a(183),Qe=a.n(Ge),Ve=a(182),Je=a.n(Ve),Ke=a(44),$e=a.n(Ke),Fe=a(186),Xe=a.n(Fe);function Ye(e){var t=e.children,a=e.dir;return o.a.createElement($e.a,{component:"div",dir:a,style:{padding:24}},t)}var Ze={headers:{"Content-Type":"application/json",Accept:"application/json"}},et=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.handleSearchLocal=function(e){ge.a.get("https://api-wpa.herokuapp.com/locales/"+e,Ze).then(function(e){200===e.status&&a.setState({Local:e.data.local,ProductosMarket:e.data.products})}).catch(function(e){console.log(e)})},a.handleAddProduct=function(e,t){var n={product:e,quantity:1},o=!0;0===a.state.ProductsSend.length?(a.state.ProductsSend.push(n),document.getElementById("txtQuantity_"+e).value=1):(a.state.ProductsSend.map(function(t){t.product===e&&(t.quantity=t.quantity+1,document.getElementById("txtQuantity_"+e).value=t.quantity,o=!1)}),o&&(a.state.ProductsSend.push(n),document.getElementById("txtQuantity_"+e).value=1)),a.setState({productsInCar:!0})},a.handleDeleteProduct=function(e,t){var n=0;a.state.ProductsSend.length>0&&a.state.ProductsSend.map(function(t){t.product===e&&t.quantity>0&&(t.quantity=t.quantity-1,0===t.quantity&&a.state.ProductsSend.splice(n,1),document.getElementById("txtQuantity_"+e).value=t.quantity),n++}),0===a.state.ProductsSend.length&&a.setState({productsInCar:!1})},a.handleSendToCarClic=function(e){var t=(new S.a).get("iap");ge.a.post("https://api-wpa.herokuapp.com/cart",JSON.stringify({user:t,products:a.state.ProductsSend}),Ze).then(function(e){200===e.status?console.log(e.data.response,"y rol: ",e.data.rol):console.log("Error...")}).catch(function(e){console.log(e)})},a.state={Local:[],ProductosMarket:[],ProductsSend:[],value:0,productsInCar:!1};var n=a.props.match.params.id;return a.handleSearchLocal(n),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=(new S.a).get("user"),a=this.props.classes;return o.a.createElement("div",{className:a.root},o.a.createElement("div",null,void 0!==t?o.a.createElement(ne,{user:t,title:"Detalle",type:"Atras"}):null),o.a.createElement(j.a,{container:!0,spacing:24},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("img",{alt:"",src:this.state.Local.image,className:a.image}))),o.a.createElement(j.a,{xs:12},o.a.createElement(x.a,{in:this.state.productsInCar},o.a.createElement(y.a,{variant:"contained",color:"primary",className:!0===this.state.productsInCar?a.botonSendToCar:a.btnHideSendToCar,onClick:function(t){return e.handleSendToCarClic(t)}},"Enviar a Carrito")),o.a.createElement(M.a,{position:"static",color:"default"},o.a.createElement(Be.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},o.a.createElement(We.a,{label:"Informaci\xf3n"}),o.a.createElement(We.a,{label:"Productos"}))),o.a.createElement(Ae.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},o.a.createElement(Ye,{dir:a.direction},o.a.createElement("b",null,"Local: "),this.state.Local.name),o.a.createElement(Ye,{dir:a.direction},this.state.ProductosMarket.map(function(t){return o.a.createElement(Ue.a,{className:a.card},o.a.createElement(De.a,null,o.a.createElement(Je.a,{className:a.media,image:t.image,title:t.name}),o.a.createElement(Qe.a,null,o.a.createElement($e.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.name),o.a.createElement($e.a,{component:"p"},t.description))),o.a.createElement(He.a,null,o.a.createElement(T.a,null,o.a.createElement(Pe.a,{"aria-label":"Add",onClick:function(a){return e.handleAddProduct(t.id,a)}})),o.a.createElement(Xe.a,{className:a.input,disabled:!0,id:t.id?"txtQuantity_"+t.id:"",inputProps:{"aria-label":"Description"}}),o.a.createElement(T.a,{"aria-label":"Add",onClick:function(a){return e.handleDeleteProduct(t.id,a)}},o.a.createElement(Le.a,null))))})))))}}]),t}(n.Component),tt=Object(E.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:"#d1cfcf"},root_:{backgroundColor:e.palette.background.paper,width:500},gridList:{width:"100%",height:"100%"},icon:{color:"rgba(255, 255, 255, 0.54)"},image:{width:"100%",height:"100%"},card:{maxWidth:"100%",MarginBottom:10},media:{height:140},botonSendToCar:{display:"block",width:"100%",position:"fixed",zIndex:1e3,bottom:0},btnHideSendToCar:{display:"none"}}})(et),at=a(113),nt=a.n(at),ot=a(114),rt=a.n(ot),it=a(189),lt=a.n(it),ct=a(191),st=a.n(ct),ut=a(190),dt=a.n(ut),mt=a(192),pt=a.n(mt),ht=a(188),gt=a.n(ht),Et={headers:{"Content-Type":"application/json",Accept:"application/json"}},ft=new S.a,bt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleGetCart=function(){var e=ft.get("iap");ge.a.get("https://api-wpa.herokuapp.com/users/"+e,Et).then(function(e){200===e.status?(a.setState({cart:e.data.cart}),console.log("cart",a.state.cart)):console.log("Error...")}).catch(function(e){console.log(e)})},a.state={cart:[]},a.handleGetCart(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=ft.get("user"),t=this.props.classes;return o.a.createElement("div",null,o.a.createElement("div",null,void 0!==e?o.a.createElement(ne,{user:e,title:"Tu Carrito de compras",type:"Atras"}):null),o.a.createElement("div",{className:t.root},o.a.createElement(nt.a,{className:t.root},this.state.cart.map(function(e){return o.a.createElement("div",null,o.a.createElement(rt.a,{key:e.name,role:void 0,dense:!0,button:!0},o.a.createElement(X.a,null,o.a.createElement(gt.a,null)),o.a.createElement(lt.a,{primary:e.name,secondary:"Cantidad: "+e.quantity}),o.a.createElement(dt.a,null,o.a.createElement(T.a,{"aria-label":"Delete"},o.a.createElement(st.a,{className:t.icon})))),o.a.createElement(pt.a,null))}))),o.a.createElement(y.a,{variant:"contained",color:"primary",className:this.state.cart.length>0?t.botonSendToCar:t.btnHideSendToCar},"Pagar"))}}]),t}(n.Component),vt=Object(E.withStyles)(function(e){return{root:{paddingTop:"10%",width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},inline:{display:"inline"},botonSendToCar:{display:"block",width:"100%",position:"fixed",zIndex:1e3,bottom:0},btnHideSendToCar:{display:"none"}}})(bt);c.a.initializeApp({apiKey:"AIzaSyCRTvsrNppBUNVBWePdO_4ISoWiKItupw4",authDomain:"newagent-e8ec8.firebaseapp.com",databaseURL:"https://newagent-e8ec8.firebaseio.com",projectId:"newagent-e8ec8",storageBucket:"newagent-e8ec8.appspot.com",messagingSenderId:"322573395813"});i.a.render(o.a.createElement(function(){return o.a.createElement(ke.a,{basename:"/app"},o.a.createElement(je.a,null,o.a.createElement(Se.a,{exact:!0,path:"/",component:we}),o.a.createElement(Se.a,{exact:!0,path:"/home",component:ve}),o.a.createElement(Se.a,{exact:!0,path:"/detail/:id",component:tt}),o.a.createElement(Se.a,{exact:!0,path:"/payment",component:vt})))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Oe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):xe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):xe(t,e)})}}()},80:function(e,t,a){}},[[194,1,2]]]);
//# sourceMappingURL=main.f689adf6.chunk.js.map